---
import SectionHeading from './SectionHeading.astro';
---

<section class="py-24 px-6 relative">
  <div class="max-w-7xl mx-auto">
    <SectionHeading
      id="architecture"
      title="Battle-Tested Architecture"
      subtitle="Rust data plane, Go control plane, Python AI engine â€” each component optimized for its role"
    />

    <!-- Architecture Diagram -->
    <div class="max-w-3xl mx-auto mb-16" data-animate>
      <!-- Client Layer -->
      <div class="flex justify-center mb-1">
        <div class="arch-node border-t-cyan-400">
          <div class="w-9 h-9 rounded-lg bg-cyan-500/10 flex items-center justify-center flex-shrink-0">
            <svg class="w-5 h-5 text-cyan-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5a17.92 17.92 0 0 1-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"/></svg>
          </div>
          <div class="flex-1 min-w-0">
            <div class="font-semibold text-white text-sm">Clients</div>
            <div class="text-xs text-[var(--color-text-muted)]">Web / Mobile / API Consumers</div>
          </div>
        </div>
      </div>

      <!-- Connector -->
      <div class="arch-flow"><div class="arch-line"></div><span>PQC TLS 1.3</span><div class="arch-arrow"></div></div>

      <!-- Gateway Layer -->
      <div class="flex justify-center mb-1">
        <div class="arch-node border-t-rose-400 w-full">
          <div class="w-9 h-9 rounded-lg bg-rose-500/10 flex items-center justify-center flex-shrink-0">
            <svg class="w-5 h-5 text-rose-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"/></svg>
          </div>
          <div class="flex-1 min-w-0">
            <div class="font-semibold text-white text-sm">QSGW Gateway</div>
            <div class="text-xs text-[var(--color-text-muted)]">Rust Â· Axum/Tokio Â· PQC TLS Â· Auth Â· Rate Limit Â· Reverse Proxy</div>
          </div>
          <div class="text-xs font-mono text-brand-400">:8443</div>
        </div>
      </div>

      <!-- Connector -->
      <div class="arch-flow"><div class="arch-line"></div><span>REST / gRPC</span><div class="arch-arrow"></div></div>

      <!-- Services Layer -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mb-1">
        <div class="arch-node border-t-green-400">
          <div class="w-9 h-9 rounded-lg bg-green-500/10 flex items-center justify-center flex-shrink-0">
            <svg class="w-5 h-5 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"/></svg>
          </div>
          <div class="flex-1 min-w-0">
            <div class="font-semibold text-white text-sm">Control Plane</div>
            <div class="text-xs text-[var(--color-text-muted)]">Go Â· Config Â· Routes</div>
          </div>
          <div class="text-xs font-mono text-brand-400">:8085</div>
        </div>
        <div class="arch-node border-t-yellow-400">
          <div class="w-9 h-9 rounded-lg bg-yellow-500/10 flex items-center justify-center flex-shrink-0">
            <svg class="w-5 h-5 text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.3 24.3 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.3 48.3 0 0 1 12 21a48.3 48.3 0 0 1-8.135-.687c-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"/></svg>
          </div>
          <div class="flex-1 min-w-0">
            <div class="font-semibold text-white text-sm">AI Engine</div>
            <div class="text-xs text-[var(--color-text-muted)]">Python Â· Anomaly Â· Bot</div>
          </div>
          <div class="text-xs font-mono text-brand-400">:8086</div>
        </div>
        <div class="arch-node border-t-sky-400">
          <div class="w-9 h-9 rounded-lg bg-sky-500/10 flex items-center justify-center flex-shrink-0">
            <svg class="w-5 h-5 text-sky-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008zm0-6h.008v.008h-.008v-.008zm-3 6h.008v.008h-.008v-.008zm0-6h.008v.008h-.008v-.008z"/></svg>
          </div>
          <div class="flex-1 min-w-0">
            <div class="font-semibold text-white text-sm">Upstream Services</div>
            <div class="text-xs text-[var(--color-text-muted)]">Your APIs</div>
          </div>
        </div>
      </div>

      <!-- Connector -->
      <div class="arch-flow"><div class="arch-line"></div><span>SQL / Raft</span><div class="arch-arrow"></div></div>

      <!-- Data Layer -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
        <div class="arch-node border-t-blue-400">
          <div class="w-9 h-9 rounded-lg bg-blue-500/10 flex items-center justify-center flex-shrink-0">
            <svg class="w-5 h-5 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4.03 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4.03 3 9 3s9-1.34 9-3V5"/></svg>
          </div>
          <div class="flex-1 min-w-0">
            <div class="font-semibold text-white text-sm">PostgreSQL</div>
            <div class="text-xs text-[var(--color-text-muted)]">Routes Â· Threats Â· TLS</div>
          </div>
          <div class="text-xs font-mono text-brand-400">:5432</div>
        </div>
        <div class="arch-node border-t-violet-400">
          <div class="w-9 h-9 rounded-lg bg-violet-500/10 flex items-center justify-center flex-shrink-0">
            <svg class="w-5 h-5 text-violet-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"/></svg>
          </div>
          <div class="flex-1 min-w-0">
            <div class="font-semibold text-white text-sm">etcd</div>
            <div class="text-xs text-[var(--color-text-muted)]">Distributed Config</div>
          </div>
          <div class="text-xs font-mono text-brand-400">:2379</div>
        </div>
        <div class="arch-node border-t-indigo-400">
          <div class="w-9 h-9 rounded-lg bg-indigo-500/10 flex items-center justify-center flex-shrink-0">
            <svg class="w-5 h-5 text-indigo-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="14" rx="2"/><path d="M7 21h10M12 17v4"/></svg>
          </div>
          <div class="flex-1 min-w-0">
            <div class="font-semibold text-white text-sm">Admin Dashboard</div>
            <div class="text-xs text-[var(--color-text-muted)]">React 19</div>
          </div>
          <div class="text-xs font-mono text-brand-400">:3004</div>
        </div>
      </div>
    </div>

    <!-- Component Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto">
      <div class="glass-card-hover p-6 text-center stagger-1" data-animate>
        <div class="w-12 h-12 rounded-xl bg-rose-500/10 flex items-center justify-center mx-auto mb-4">
          <span class="text-2xl">ðŸ¦€</span>
        </div>
        <h3 class="font-bold text-white mb-2">Rust Gateway</h3>
        <p class="text-sm text-[var(--color-text-muted)]">Axum + Tokio data plane with PQC TLS termination, reverse proxy, and zero-copy forwarding</p>
      </div>

      <div class="glass-card-hover p-6 text-center stagger-2" data-animate>
        <div class="w-12 h-12 rounded-xl bg-green-500/10 flex items-center justify-center mx-auto mb-4">
          <span class="text-2xl">âš¡</span>
        </div>
        <h3 class="font-bold text-white mb-2">Go Control Plane</h3>
        <p class="text-sm text-[var(--color-text-muted)]">Configuration management, health checks, route management, and admin API on port 8085</p>
      </div>

      <div class="glass-card-hover p-6 text-center stagger-3" data-animate>
        <div class="w-12 h-12 rounded-xl bg-yellow-500/10 flex items-center justify-center mx-auto mb-4">
          <span class="text-2xl">ðŸ¤–</span>
        </div>
        <h3 class="font-bold text-white mb-2">Python AI Engine</h3>
        <p class="text-sm text-[var(--color-text-muted)]">Real-time threat classification, anomaly detection, and security analytics on port 8086</p>
      </div>
    </div>
  </div>
</section>
